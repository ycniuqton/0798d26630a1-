{% extends 'layouts/base.html' %}
{% load static %}

{% block breadcrumbs %}{% endblock breadcrumbs %}

{% block extrastyle %}
<style>
.iframe-container {display: flex; width: 100%; height: 100%; flex-direction: column; overflow: hidden;}
.parent-fit { flex-grow: 1; border: none; margin: 0; padding: 0; height: 100vh; }
</style>
{% endblock extrastyle %}

{% block content %}
<style>
.search-bar {
    display: flex;
    align-items: center;
    margin-bottom: 20px;
}
.search-bar input {
    flex: 1;
}
.search-bar select, .search-bar button {
    margin-left: 10px;
}
.table thead th {
    background-color: #f8f9fa;
}
.no-rules {
    text-align: center;
    padding: 50px 0;
}
.no-rules img {
    max-width: 150px;
    margin-bottom: 20px;
}
.add-btn {
    float: right;
    margin-bottom: 10px;
}
.alerting {
    padding: 20px;
    border: 1px solid #e9ecef;
    border-radius: 5px;
    margin-bottom: 20px;
}
.alerting h4 {
    display: flex;
    justify-content: space-between;
    align-items: center;
}
.alerting h4 a {
    font-size: 14px;
}
</style>

<div class="container mt-4">
    <h2>Monitoring</h2>
    <div class="alerting">
        <h4>
            Alerting <a href="#">details</a>
        </h4>
        <div class="no-rules">
            <img src="https://via.placeholder.com/150" alt="No Rules">
            <h4>No rules have been created yet, let's get started right away</h4>
        </div>
    </div>
    <div>
        <h3>Alert Rules</h3>
        <div class="search-bar">
            <input type="text" class="form-control" placeholder="Please enter" aria-label="Search">
            <select class="form-control">
                <option selected>Rule Name</option>
            </select>
            <button class="btn btn-outline-secondary"><i class="fas fa-sync-alt"></i></button>
            <button class="btn btn-primary add-btn">+ Add</button>
        </div>
        <table class="table table-hover">
            <thead>
                <tr>
                    <th scope="col">Rule Name</th>
                    <th scope="col">Status</th>
                    <th scope="col">Date Created</th>
                    <th scope="col">Operation</th>
                </tr>
            </thead>
            <tbody>
                {% if alert_rules %}
                    {% for rule in alert_rules %}
                    <tr>
                        <td>{{ rule.rule_name }}</td>
                        <td>{{ rule.status }}</td>
                        <td>{{ rule.date_created }}</td>
                        <td>
                            <button class="btn btn-sm btn-outline-primary">Manage</button>
                        </td>
                    </tr>
                    {% endfor %}
                {% else %}
                    <tr>
                        <td colspan="4" class="no-rules">
                            <img src="https://via.placeholder.com/150" alt="No Rules">
                            <h4>No Rules</h4>
                        </td>
                    </tr>
                {% endif %}
            </tbody>
        </table>
    </div>
</div>
{% endblock content %}
