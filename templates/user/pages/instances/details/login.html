<div class="card card-custom">
    <div class="card-header">
        <h4>Login Information</h4>
    </div>
    <div class="card-body">
        <table class="table table-borderless">
            <tr>
                <th>Hostname</th>
                <td>
                    <span id="hostname-text">{{ instance.hostname }}</span>
                    <i class="fas fa-edit" id="change-hostname-icon" style="cursor: pointer;" onclick="showHostnameInput()"></i>
                    <input type="text" id="hostname-input" class="form-control d-none" value="{{ instance.hostname }}">
                    <button id="update-hostname-btn" class="btn btn-primary d-none" onclick="updateHostname()">Update</button>
                    <button id="cancel-hostname-btn" class="btn btn-secondary d-none" onclick="cancelHostnameChange()">Cancel</button>
                </td>
            </tr>
            <tr>
                <th>Login</th>
                <td>{{ instance.login }}</td>
            </tr>
            <tr>
                <th>Password</th>
                <td>
                    <div class="input-group">
                        <input type="password" class="form-control" value="{{ instance.password }}" id="password-field">
                        <div class="input-group-append">
                            <button class="btn btn-outline-secondary" type="button" onclick="togglePasswordVisibility()">
                                <i class="fas fa-eye-slash" id="toggle-password-icon"></i>
                            </button>
                            <button class="btn btn-outline-secondary" type="button" onclick="copyPassword()">
                                <i class="fas fa-copy"></i>
                            </button>
                        </div>
                    </div>
                </td>
            </tr>
        </table>
    </div>
</div>

<script>
    function showHostnameInput() {
        document.getElementById('hostname-text').classList.add('d-none');
        document.getElementById('change-hostname-icon').classList.add('d-none');
        document.getElementById('hostname-input').classList.remove('d-none');
        document.getElementById('update-hostname-btn').classList.remove('d-none');
        document.getElementById('cancel-hostname-btn').classList.remove('d-none');
    }

    function updateHostname() {
        const newHostname = document.getElementById('hostname-input').value;
        document.getElementById('hostname-text').textContent = newHostname;
        cancelHostnameChange();
        // Optionally, you can add code here to make an API call to update the hostname on the server
    }

    function cancelHostnameChange() {
        document.getElementById('hostname-text').classList.remove('d-none');
        document.getElementById('change-hostname-icon').classList.remove('d-none');
        document.getElementById('hostname-input').classList.add('d-none');
        document.getElementById('update-hostname-btn').classList.add('d-none');
        document.getElementById('cancel-hostname-btn').classList.add('d-none');
    }

    function togglePasswordVisibility() {
        const passwordField = document.getElementById('password-field');
        const toggleIcon = document.getElementById('toggle-password-icon');
        if (passwordField.type === 'password') {
            passwordField.type = 'text';
            toggleIcon.classList.remove('fa-eye-slash');
            toggleIcon.classList.add('fa-eye');
        } else {
            passwordField.type = 'password';
            toggleIcon.classList.remove('fa-eye');
            toggleIcon.classList.add('fa-eye-slash');
        }
    }

    function copyPassword() {
        const passwordField = document.getElementById('password-field');
        passwordField.select();
        passwordField.setSelectionRange(0, 99999); // For mobile devices
        document.execCommand('copy');
        alert('Password copied to clipboard');
    }
</script>
